{"ast":null,"code":"var _jsxFileName = \"/home/henok/Fullstack/client/src/containers/Home.js\";\nimport React, { Component } from \"react\";\nimport Navigation from \"../components/Navigation/Navigation\";\nimport Logo from \"../components/Logo/Logo\";\nimport Input from \"../components/input/Input\";\nimport Rank from \"../components/Rank/Rank\";\nimport Recognition from \"../components/Recognition/Recognition\";\nimport \"./Home.css\";\nimport Clarifai from \"clarifai\";\nimport { AuthConsumer } from \"../contexts/MyAuthProvider\";\nimport axios from \"axios\";\nimport Particles from \"react-particles-js\"; // const particlesProps = {\n// \tparticles: {\n// \t\tline_linked: {\n// \t\t\tshadow: {\n// \t\t\t\tenable: true,\n// \t\t\t\tcolor: \"#3CA9D1\",\n// \t\t\t\tblur: 5\n// \t\t\t}\n// \t\t},\n// \t\tnumber: {\n// \t\t\tvalue: 70,\n// \t\t\tdensity: {\n// \t\t\t\tenable: true,\n// \t\t\t\tvalue_area: 800\n// \t\t\t}\n// \t\t}\n// \t}\n// };\n\nconst app = new Clarifai.App({\n  apiKey: \"765407f142ad45a888f78f8a622c9c37\"\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.loaded = () => {\n      this.setState({\n        loaded: true\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        input: event.target.value,\n        nameImage: \"\"\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const token = localStorage.getItem(\"token\");\n      axios({\n        method: \"put\",\n        url: \"http://localhost:3000/image\",\n        data: {\n          id: this.state.user.id,\n          token\n        }\n      }).then(res => {\n        if (res.data !== \"invalid token\") {\n          localStorage.setItem(\"token\", res.data.token);\n          app.models.predict(\"e466caa0619f444ab97497640cefc4dc\", this.state.input).then(response => {\n            console.log(response);\n            const value = response.outputs[0].data.regions[0].data.face.identity.concepts[0].name;\n            return value;\n          }).then(name => {\n            if (!!name) {\n              console.log(name);\n              this.setState({\n                nameImage: name,\n                detect: !this.state.detect\n              });\n              this.setState(Object.assign(this.state.user, {\n                entries: data.entries\n              }));\n            }\n          });\n        } else if (res.data === \"invalid token\") {\n          localStorage.removeItem(\"token\");\n          this.props.history.push(\"/signin\");\n        }\n      });\n    };\n\n    this.state = {\n      input: \"\",\n      nameImage: \"\",\n      detect: false,\n      user: {\n        id: undefined,\n        name: undefined,\n        entries: undefined\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/profile/${this.props.location.state.userData.id}`).then(res => res.json()).then(user => {\n      const entries = user.entries;\n      return entries;\n    }).then(entries => {\n      this.setState({\n        user: {\n          id: this.props.location.state.userData.id,\n          name: this.props.location.state.userData.name,\n          entries\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Rank, {\n      name: this.state.user.name,\n      entries: this.state.user.entries,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Recognition, {\n      imgUrl: this.state.input,\n      name: this.state.nameImage,\n      input: this.state.input,\n      detect: this.state.detect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/henok/Fullstack/client/src/containers/Home.js"],"names":["React","Component","Navigation","Logo","Input","Rank","Recognition","Clarifai","AuthConsumer","axios","Particles","app","App","apiKey","constructor","props","loaded","setState","handleChange","event","input","target","value","nameImage","handleSubmit","preventDefault","token","localStorage","getItem","method","url","data","id","state","user","then","res","setItem","models","predict","response","console","log","outputs","regions","face","identity","concepts","name","detect","Object","assign","entries","removeItem","history","push","undefined","componentDidMount","fetch","location","userData","json","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Navigation from \"../components/Navigation/Navigation\";\nimport Logo from \"../components/Logo/Logo\";\nimport Input from \"../components/input/Input\";\nimport Rank from \"../components/Rank/Rank\";\nimport Recognition from \"../components/Recognition/Recognition\";\nimport \"./Home.css\";\nimport Clarifai from \"clarifai\";\nimport { AuthConsumer } from \"../contexts/MyAuthProvider\";\nimport axios from \"axios\";\n\nimport Particles from \"react-particles-js\";\n\n// const particlesProps = {\n// \tparticles: {\n// \t\tline_linked: {\n// \t\t\tshadow: {\n// \t\t\t\tenable: true,\n// \t\t\t\tcolor: \"#3CA9D1\",\n// \t\t\t\tblur: 5\n// \t\t\t}\n// \t\t},\n// \t\tnumber: {\n// \t\t\tvalue: 70,\n// \t\t\tdensity: {\n// \t\t\t\tenable: true,\n// \t\t\t\tvalue_area: 800\n// \t\t\t}\n// \t\t}\n// \t}\n// };\n\nconst app = new Clarifai.App({\n\tapiKey: \"765407f142ad45a888f78f8a622c9c37\"\n});\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tinput: \"\",\n\t\t\tnameImage: \"\",\n\t\t\tdetect: false,\n\t\t\tuser: {\n\t\t\t\tid: undefined,\n\t\t\t\tname: undefined,\n\t\t\t\tentries: undefined\n\t\t\t}\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tfetch(\n\t\t\t`http://localhost:3000/profile/${\n\t\t\t\tthis.props.location.state.userData.id\n\t\t\t}`\n\t\t)\n\t\t\t.then(res => res.json())\n\t\t\t.then(user => {\n\t\t\t\tconst entries = user.entries;\n\t\t\t\treturn entries;\n\t\t\t})\n\t\t\t.then(entries => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: this.props.location.state.userData.id,\n\t\t\t\t\t\tname: this.props.location.state.userData.name,\n\t\t\t\t\t\tentries\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tloaded = () => {\n\t\tthis.setState({ loaded: true });\n\t};\n\thandleChange = event => {\n\t\tthis.setState({\n\t\t\tinput: event.target.value,\n\t\t\tnameImage: \"\"\n\t\t});\n\t};\n\n\thandleSubmit = event => {\n\t\tevent.preventDefault();\n\t\tconst token = localStorage.getItem(\"token\");\n\t\taxios({\n\t\t\tmethod: \"put\",\n\t\t\turl: \"http://localhost:3000/image\",\n\t\t\tdata: {\n\t\t\t\tid: this.state.user.id,\n\t\t\t\ttoken\n\t\t\t}\n\t\t}).then(res => {\n\t\t\tif (res.data !== \"invalid token\") {\n\t\t\t\tlocalStorage.setItem(\"token\", res.data.token);\n\n\t\t\t\tapp.models\n\t\t\t\t\t.predict(\n\t\t\t\t\t\t\"e466caa0619f444ab97497640cefc4dc\",\n\t\t\t\t\t\tthis.state.input\n\t\t\t\t\t)\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\tconst value =\n\t\t\t\t\t\t\tresponse.outputs[0].data.regions[0].data.face\n\t\t\t\t\t\t\t\t.identity.concepts[0].name;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t})\n\t\t\t\t\t.then(name => {\n\t\t\t\t\t\tif (!!name) {\n\t\t\t\t\t\t\tconsole.log(name);\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tnameImage: name,\n\t\t\t\t\t\t\t\tdetect: !this.state.detect\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\tObject.assign(this.state.user, {\n\t\t\t\t\t\t\t\t\tentries: data.entries\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else if (res.data === \"invalid token\") {\n\t\t\t\tlocalStorage.removeItem(\"token\");\n\t\t\t\tthis.props.history.push(\"/signin\");\n\t\t\t}\n\t\t});\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/*<Particles className=\"particles\" params={particlesProps} />*/}\n\t\t\t\t<Navigation />\n\t\t\t\t<Rank\n\t\t\t\t\tname={this.state.user.name}\n\t\t\t\t\tentries={this.state.user.entries}\n\t\t\t\t/>\n\t\t\t\t<Input\n\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t/>\n\t\t\t\t<Recognition\n\t\t\t\t\timgUrl={this.state.input}\n\t\t\t\t\tname={this.state.nameImage}\n\t\t\t\t\tinput={this.state.input}\n\t\t\t\t\tdetect={this.state.detect}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}