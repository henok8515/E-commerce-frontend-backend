{"ast":null,"code":"var _jsxFileName = \"/home/henok/Fullstack/client/src/containers/Home.js\";\nimport React, { Component } from 'react';\nimport Navigation from '../components/Navigation/Navigation';\nimport Logo from '../components/Logo/Logo';\nimport Input from '../components/input/Input';\nimport Rank from '../components/Rank/Rank';\nimport Recognition from '../components/Recognition/Recognition';\nimport './Home.css';\nimport Clarifai from 'clarifai';\nimport { AuthConsumer } from '../contexts/MyAuthProvider';\nimport axios from 'axios';\nimport Particles from 'react-particles-js'; // const particlesProps = {\n// \tparticles: {\n// \t\tline_linked: {\n// \t\t\tshadow: {\n// \t\t\t\tenable: true,\n// \t\t\t\tcolor: \"#3CA9D1\",\n// \t\t\t\tblur: 5\n// \t\t\t}\n// \t\t},\n// \t\tnumber: {\n// \t\t\tvalue: 70,\n// \t\t\tdensity: {\n// \t\t\t\tenable: true,\n// \t\t\t\tvalue_area: 800\n// \t\t\t}\n// \t\t}\n// \t}\n// };\n\nconst app = new Clarifai.App({\n  apiKey: '765407f142ad45a888f78f8a622c9c37'\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.loaded = () => {\n      this.setState({\n        loaded: true\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        input: event.target.value,\n        nameImage: ''\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const token = localStorage.getItem('token');\n      axios({\n        method: 'put',\n        url: 'http://localhost:3000/image',\n        data: {\n          id: this.state.user.id,\n          token\n        }\n      }).then(res => {\n        if (res.data !== 'invalid token') {\n          localStorage.setItem('token', res.data.token);\n          app.models.predict('e466caa0619f444ab97497640cefc4dc', this.state.input).then(response => {\n            console.log(response);\n            const value = response.outputs[0].data.regions[0].data.face.identity.concepts[0].name;\n            return value;\n          }).then(name => {\n            if (!!name) {\n              console.log(name);\n              this.setState({\n                nameImage: name,\n                detect: !this.state.detect\n              });\n              this.setState(Object.assign(this.state.user, {\n                entries: res.data.entries\n              }));\n            }\n          });\n        } else if (res.data === 'invalid token') {\n          localStorage.removeItem('token');\n          this.props.history.push('/signin');\n        }\n      });\n    };\n\n    this.state = {\n      input: '',\n      nameImage: '',\n      detect: false,\n      user: {\n        id: undefined,\n        name: undefined,\n        entries: undefined\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/profile/${this.props.location.state.userData.id}`).then(res => res.json()).then(user => {\n      const entries = user.entries;\n      return entries;\n    }).then(entries => {\n      this.setState({\n        user: {\n          id: this.props.location.state.userData.id,\n          name: this.props.location.state.userData.name,\n          entries\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Navigation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Rank, {\n      name: this.state.user.name,\n      entries: this.state.user.entries,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Recognition, {\n      imgUrl: this.state.input,\n      name: this.state.nameImage,\n      input: this.state.input,\n      detect: this.state.detect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/henok/Fullstack/client/src/containers/Home.js"],"names":["React","Component","Navigation","Logo","Input","Rank","Recognition","Clarifai","AuthConsumer","axios","Particles","app","App","apiKey","constructor","props","loaded","setState","handleChange","event","input","target","value","nameImage","handleSubmit","preventDefault","token","localStorage","getItem","method","url","data","id","state","user","then","res","setItem","models","predict","response","console","log","outputs","regions","face","identity","concepts","name","detect","Object","assign","entries","removeItem","history","push","undefined","componentDidMount","fetch","location","userData","json","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Navigation from '../components/Navigation/Navigation'\nimport Logo from '../components/Logo/Logo'\nimport Input from '../components/input/Input'\nimport Rank from '../components/Rank/Rank'\nimport Recognition from '../components/Recognition/Recognition'\nimport './Home.css'\nimport Clarifai from 'clarifai'\nimport { AuthConsumer } from '../contexts/MyAuthProvider'\nimport axios from 'axios'\n\nimport Particles from 'react-particles-js'\n\n// const particlesProps = {\n// \tparticles: {\n// \t\tline_linked: {\n// \t\t\tshadow: {\n// \t\t\t\tenable: true,\n// \t\t\t\tcolor: \"#3CA9D1\",\n// \t\t\t\tblur: 5\n// \t\t\t}\n// \t\t},\n// \t\tnumber: {\n// \t\t\tvalue: 70,\n// \t\t\tdensity: {\n// \t\t\t\tenable: true,\n// \t\t\t\tvalue_area: 800\n// \t\t\t}\n// \t\t}\n// \t}\n// };\n\nconst app = new Clarifai.App({\n    apiKey: '765407f142ad45a888f78f8a622c9c37',\n})\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            input: '',\n            nameImage: '',\n            detect: false,\n            user: {\n                id: undefined,\n                name: undefined,\n                entries: undefined,\n            },\n        }\n    }\n\n    componentDidMount() {\n        fetch(\n            `http://localhost:3000/profile/${this.props.location.state.userData.id}`\n        )\n            .then((res) => res.json())\n            .then((user) => {\n                const entries = user.entries\n                return entries\n            })\n            .then((entries) => {\n                this.setState({\n                    user: {\n                        id: this.props.location.state.userData.id,\n                        name: this.props.location.state.userData.name,\n                        entries,\n                    },\n                })\n            })\n    }\n\n    loaded = () => {\n        this.setState({ loaded: true })\n    }\n    handleChange = (event) => {\n        this.setState({\n            input: event.target.value,\n            nameImage: '',\n        })\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n        const token = localStorage.getItem('token')\n        axios({\n            method: 'put',\n            url: 'http://localhost:3000/image',\n            data: {\n                id: this.state.user.id,\n                token,\n            },\n        }).then((res) => {\n            if (res.data !== 'invalid token') {\n                localStorage.setItem('token', res.data.token)\n\n                app.models\n                    .predict(\n                        'e466caa0619f444ab97497640cefc4dc',\n                        this.state.input\n                    )\n                    .then((response) => {\n                        console.log(response)\n                        const value =\n                            response.outputs[0].data.regions[0].data.face\n                                .identity.concepts[0].name\n                        return value\n                    })\n                    .then((name) => {\n                        if (!!name) {\n                            console.log(name)\n                            this.setState({\n                                nameImage: name,\n                                detect: !this.state.detect,\n                            })\n\n                            this.setState(\n                                Object.assign(this.state.user, {\n                                    entries: res.data.entries,\n                                })\n                            )\n                        }\n                    })\n            } else if (res.data === 'invalid token') {\n                localStorage.removeItem('token')\n                this.props.history.push('/signin')\n            }\n        })\n    }\n    render() {\n        return (\n            <div>\n                {/*<Particles className=\"particles\" params={particlesProps} />*/}\n                <Navigation />\n                <Rank\n                    name={this.state.user.name}\n                    entries={this.state.user.entries}\n                />\n                <Input\n                    handleChange={this.handleChange}\n                    handleSubmit={this.handleSubmit}\n                />\n                <Recognition\n                    imgUrl={this.state.input}\n                    name={this.state.nameImage}\n                    input={this.state.input}\n                    detect={this.state.detect}\n                />\n            </div>\n        )\n    }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}